<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Korean Flashcards</title>
    <style>
        body { font-family: Arial; max-width: 600px; margin: auto; padding: 20px; }
        h1, h2 { text-align: center; }
        .section { margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; }
        .flashcard { text-align: center; font-size: 24px; margin-top: 30px; }
        .button { padding: 10px 20px; font-size: 16px; margin: 10px; }
        .center { text-align: center; }
    </style>
</head>
<body>
    <h1>Korean Flashcards</h1>

    <div class="section">
        <h2>Practice</h2>
        <div class="center">
            <label>
                <input type="radio" name="direction" value="korean" checked> Show Korean First
            </label>
            <label>
                <input type="radio" name="direction" value="english"> Show English First
            </label>
        </div>
        <div class="flashcard" id="cardDisplay">Click "Next Card" to start</div>
        <div class="center">
            <button class="button" onclick="nextCard()">Next Card</button>
            <button class="button" onclick="flipCard()">Flip Card</button>
        </div>
    </div>

    <script>
        let vocabList = [];
        let currentCard = null;
        let showingFront = true;
        let currentDirection = "korean";

        async function loadVocabFromSheet() {
            const response = await fetch("https://script.google.com/macros/s/AKfycbzPzXRhip06Q7AxD7KvhDEQbdCTjU2ZwSLyrXpn9hAh3DnnHMv9-UOr5YPV_gm7zT5xiQ/exec");
            vocabList = await response.json();
        }

        function displayStatus(message) {
            document.getElementById("cardDisplay").textContent = message;
        }

        function updateDirection() {
            const selected = document.querySelector('input[name="direction"]:checked');
            currentDirection = selected ? selected.value : "korean";
        }

        function nextCard() {
            if (vocabList.length === 0) {
                displayStatus("No flashcards loaded yet!");
                return;
            }

            updateDirection();
            const index = Math.floor(Math.random() * vocabList.length);
            currentCard = vocabList[index];
            showingFront = true;

            if (currentDirection === "korean") {
                displayStatus(currentCard.korean);
            } else {
                displayStatus(currentCard.english);
            }
        }

        function flipCard() {
            if (!currentCard) return;
            showingFront = !showingFront;

            if (currentDirection === "korean") {
                displayStatus(showingFront ? currentCard.korean : currentCard.english);
            } else {
                displayStatus(showingFront ? currentCard.english : currentCard.korean);
            }
        }

        // Load data on page load
        window.onload = async () => {
            displayStatus("Loading flashcards...");
            await loadVocabFromSheet();
            displayStatus("Flashcards loaded. Click 'Next Card' to begin.");
        };
    </script>
</body>
</html>
